@using Competitions.Common
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor _accessor;

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>سامانه</title>


    @*************** Bootstarp ****************@
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />

    @*************** Custom ****************@
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/main.css" />
    <link rel="stylesheet" href="~/css/home.css" />

    @*************** Toastr ****************@
    <link href="~/lib/toastr/content/toastr.min.css" rel="stylesheet" />

    @*************** Font Awsome ****************@
    <link rel="stylesheet" href="~/lib/fontawesome-pro-6.1.1-web/css/all.min.css" />

    @*************** SweetAlert ****************@
    <link rel="stylesheet" href="~/lib/bootstrap-sweetalert/sweetalert.min.css" />


    @*************** Summernote ****************@
    <link href="~/lib/summernote/summernote-bs5.css" rel="stylesheet">

    @await RenderSectionAsync("Styles", required: false)
</head>
<body>
    @*header*@
    @if (true || User.Identity != null && User.Identity.IsAuthenticated && _accessor.HttpContext.Request.Path.Value.Replace("/","").ToLower() != "homelogin")
    {
        <header>
            <!-- navbar -->
            <nav class="navbar navbar-expand-lg fixed-top nav-menu">
                <a href="#" class="nav-brand text-light text-uppercase">

                    <img class="header__logo rounded-circle ms-2" src="~/images/black-logo.svg" style="width:80px;aspec-ratio:1;">
                </a>

                <button class="navbar-toggler nav-button"
                    data-toggle="collapse"
                    data-target="#navbar">
                    <span class="line1"></span>
                    <span class="line2"></span>
                    <span class="line3"></span>
                </button>

                <div id="navbar"
                 class="collapse navbar-collapse justify-content-between text-uppercase font-weight-bold">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Home" asp-action="Index" class="nav-link menu-item m-2 nav-active">صفحه اصلی</a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Home" asp-action="Prog" class="nav-link menu-item m-2">فوق برنامه</a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Match" asp-action="index" class="nav-link menu-item m-2">مسابقات</a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Place" asp-action="index" class="nav-link menu-item m-2">اماکن ورزشی</a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Notification" asp-action="Index" class="nav-link menu-item m-2">اطلاعیه ها</a>
                        </li>
                        <li class="nav-item">
                            <a asp-area="" asp-controller="Match" asp-action="Calender" class="nav-link menu-item m-2">تقویم مسابقات</a>
                        </li>
                        @if (true || User.IsInRole(SD.Admin))
                        {
                            <li class="nav-item">
                                <a asp-area="Matches" asp-controller="Festival" asp-action="Index" class="nav-link menu-item m-2">مدیریت</a>
                            </li>
                        }
                    </ul>
                    <div>
                        <div class="d-flex align-items-center" onclick="document.getElementById('authInfo').classList.toggle('open')" style="cursor:pointer;">
                            <div class="position-relative">
                                <img class="header__dropdown-profile-image"
                                 src="~/images/person.jfif"
                                 alt="">
                                <span>
                                    <span class="mx-1 text-white"> @User?.Identity?.Name</span>
                                    <i class="fa fa-angle-down text-white"></i>
                                </span>
                            </div>
                        </div>
                        <div class="header__dropdown-info" style="background-color:rgba(120,120,120,.9)" id="authInfo">
                            <ul>
                                <li class="header__dropdown-item">
                                    <a class="header__dropdown-link d-flex align-items-center text-white" asp-area="Authentication" asp-controller="Account" asp-action="ChangePassword">
                                        <i class="fa fa-edit ms-2"></i>
                                        تغییر رمز عبور
                                    </a>
                                </li>
                                <li class="header__dropdown-item">
                                    <a class="header__dropdown-link d-flex align-items-center text-white" asp-area="Authentication" asp-controller="Account" asp-action="Logout">
                                        <i class="fa fa-sign-out ms-2"></i>
                                        خروج
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </nav>
            <!-- end of navbar -->

        </header>
    }
    
    <div class="container-fluid px-xl-5 px-lg-4 px-md-3" style="margin-top:100px;">
        <main role="main" class="pb-3">

            <partial name="_NotificationsPartial" />
            @RenderBody()
        </main>
    </div>


    @*************** Jquery ****************@
    <script src="~/lib/jquery/dist/jquery.min.js"></script>

    @*************** Bootstarp ****************@
    <script src="~/lib/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="~/lib/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>


    @***************** SweetAlert **************@
    <script src="~/lib/bootstrap-sweetalert/sweetalert.min.js"></script>

    @***************** Summernote **************@
    <script src="~/lib/summernote/summernote-bs4.min.js"></script>

    @*************** Custom ****************@
    <script src="~/js/site.js"></script>
    <script src="~/js/utility/dropdown.js"></script>
    <script src="~/js/utility/pagenation.js"></script>


    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
